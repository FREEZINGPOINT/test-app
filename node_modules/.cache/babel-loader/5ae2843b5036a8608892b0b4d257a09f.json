{"ast":null,"code":"import _classCallCheck from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'./UpdateTopic.css';import{withRouter}from'react-router-dom';import BackBlogGround from'./BackBlogGround';import Editor from'for-editor';import{Input,Row,Col,Card,Button}from'antd';import{TextField}from'@material-ui/core';import MenuItem from'@material-ui/core/MenuItem';import{FetchDoUploadFile,FetchDoPost,MessageAlter,FetchDoGet,AjaxDoPost}from'../../commons/Utils';import $ from'jquery';/**\n * 更新我们的文章\n */var UpdateTopic=/*#__PURE__*/function(_React$Component){_inherits(UpdateTopic,_React$Component);function UpdateTopic(props){var _this;_classCallCheck(this,UpdateTopic);_this=_possibleConstructorReturn(this,_getPrototypeOf(UpdateTopic).call(this,props));_this.state={markdownvalue:\"\",topicTypes:[],topicType:\"\",topicId:\"\",topicName:\"\",topicDesc:\"\"};_this.$vm=React.createRef();return _this;}/**\n     * 初始化我们的数据\n     */_createClass(UpdateTopic,[{key:\"componentDidMount\",value:function componentDidMount(){var _this=this;var pState=this.props.location.state;if(pState!=null&&undefined!=pState&&undefined!=pState.record&&null!=pState.record){console.log(\"record\",pState.record);FetchDoGet(\"/blog/v1/topic/show\",function(response){console.log(response);_this.setState({markdownvalue:response.topicText,topicType:response.topicCategory,topicId:response.topicId,topicName:response.topicTitle,topicDesc:response.topicDesc});},{topicId:pState.record.topicId});}else{window.location.href=\"/private-zone\";}this.setState({topicTypes:[{value:'Java',label:'Java'},{value:'Spring',label:'Spring'},{value:'Mybatis',label:'Mybatis'},{value:'前端代码',label:'前端代码'},{value:'每天一个leecode',label:'每天一个leecode'},{value:'数据库',label:'数据库'},{value:'生活笔记',label:'生活笔记'},{value:'站点维护日志',label:'站点维护日志'}]});//FetchDoGet(\"/blog/v1/statistic/statisticTopic\")\n}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(BackBlogGround,{leftSpan:0,rightSpan:24,extra:React.createElement(Card,{title:\"更新文章\",extra:React.createElement(Button,{type:\"primary\",onClick:function onClick(){var postData={topicId:_this2.state.topicId,topicText:_this2.state.markdownvalue,topicName:_this2.state.topicName,topicDesc:_this2.state.topicDesc,topicType:_this2.state.topicType};console.log(postData);AjaxDoPost(\"/blog/v1/topic/updateTopicForReact\",function(response){MessageAlter(\"success\",response);// window.location.href=\"/private-zone\"\n},postData);// FetchDoPost(\"/blog/v1/topic/updateTopicForReact\",(response)=>{\n//     MessageAlter(\"success\",response)\n//     // window.location.href=\"/private-zone\"\n// },postData)\n}},\"\\u4FDD\\u5B58\")},React.createElement(Row,{gutter:[16,16]},React.createElement(Col,{span:24},React.createElement(TextField,{fullWidth:true,id:\"topicName\",value:this.state.topicName,onChange:function onChange(event){console.log(event.target.value);_this2.setState({topicName:event.target.value});},label:\"\\u6587\\u7AE0\\u6807\\u9898\",variant:\"outlined\"})),React.createElement(Col,{span:24},React.createElement(TextField,{fullWidth:true,multiline:true,rowsMax:\"4\",value:this.state.topicDesc,onChange:function onChange(event){console.log(event.target.value);_this2.setState({topicDesc:event.target.value});},id:\"topicDesc\",label:\"\\u6587\\u7AE0\\u7B80\\u4ECB\",variant:\"outlined\"})),React.createElement(Col,{span:24},React.createElement(TextField,{fullWidth:true,select:true,helperText:\"\\u8BF7\\u9009\\u62E9\\u6587\\u7AE0\\u7684\\u7C7B\\u522B\",id:\"topicDesc\",value:this.state.topicType,onChange:function onChange(event){_this2.setState({topicType:event.target.value});},label:\"\\u6587\\u7AE0\\u7C7B\\u522B\",variant:\"outlined\"},this.state.topicTypes.map(function(item){return React.createElement(MenuItem,{key:item.value,value:item.value},item.label);}))),React.createElement(Col,{span:24},React.createElement(Editor,{style:{width:\"100%\"},placeholder:\"请输入文章的信息\",ref:this.$vm,addImg:function addImg(file){var _this=_this2;var file2=new FormData();file2.append(\"file\",file);console.log(file);FetchDoUploadFile(\"/blog/v1/file/imageUpload4React\",file2,function(response){//console.log(response)\n_this.$vm.current.$img2Url(response.fileName,response.fileName);});},value:this.state.markdownvalue,onChange:function onChange(value){//console.log(value)\n_this2.setState({markdownvalue:value});//console.log(this.state.markdownvalue)\n}}))),React.createElement(Input,null))});}}]);return UpdateTopic;}(React.Component);export default withRouter(UpdateTopic);","map":{"version":3,"sources":["/Users/breakpoint/npm_work/test-app/src/router/back/UpdateTopic.js"],"names":["React","withRouter","BackBlogGround","Editor","Input","Row","Col","Card","Button","TextField","MenuItem","FetchDoUploadFile","FetchDoPost","MessageAlter","FetchDoGet","AjaxDoPost","$","UpdateTopic","props","state","markdownvalue","topicTypes","topicType","topicId","topicName","topicDesc","$vm","createRef","_this","pState","location","undefined","record","console","log","response","setState","topicText","topicCategory","topicTitle","window","href","value","label","postData","event","target","map","item","width","file","file2","FormData","append","current","$img2Url","fileName","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport './UpdateTopic.css'\nimport { withRouter } from 'react-router-dom'\nimport BackBlogGround from './BackBlogGround'\nimport Editor from 'for-editor'\nimport { Input, Row ,Col, Card, Button} from 'antd'\nimport { TextField } from '@material-ui/core'\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { FetchDoUploadFile ,FetchDoPost, MessageAlter, FetchDoGet, AjaxDoPost} from '../../commons/Utils'\nimport $ from 'jquery'\n\n/**\n * 更新我们的文章\n */\nclass UpdateTopic extends React.Component{\n\n    constructor(props){\n        super(props)\n        this.state={\n            markdownvalue:\"\",\n            topicTypes:[],\n            topicType:\"\",\n            topicId:\"\",\n            topicName:\"\",\n            topicDesc:\"\",\n        }\n        this.$vm = React.createRef()\n    }\n\n     /**\n     * 初始化我们的数据\n     */\n    componentDidMount(){\n\n        const _this=this;\n\n        const pState=this.props.location.state;\n        \n        if(pState!=null&&undefined!=pState&&undefined!=pState.record&&null!=pState.record){\n            console.log(\"record\",pState.record)\n            FetchDoGet(\"/blog/v1/topic/show\",(response)=>{\n                console.log(response)\n                _this.setState({\n                    markdownvalue:response.topicText,\n                    topicType:response.topicCategory,\n                    topicId:response.topicId,\n                    topicName:response.topicTitle,\n                    topicDesc:response.topicDesc\n                })\n            },{\n                topicId:pState.record.topicId\n            })\n        }else{\n           window.location.href=\"/private-zone\"\n        }\n\n\n        this.setState({\n            topicTypes:[\n                {\n                    value: 'Java',\n                    label: 'Java',\n                  },\n                  {\n                    value: 'Spring',\n                    label: 'Spring',\n                  },\n                  {\n                    value: 'Mybatis',\n                    label: 'Mybatis',\n                  },\n                  {\n                    value: '前端代码',\n                    label: '前端代码',\n                  },\n                  {\n                    value: '每天一个leecode',\n                    label: '每天一个leecode',\n                  },\n                  {\n                    value: '数据库',\n                    label: '数据库',\n                  },\n                  {\n                    value: '生活笔记',\n                    label: '生活笔记',\n                  },\n                  {\n                    value: '站点维护日志',\n                    label: '站点维护日志',\n                  }\n            ] \n        })\n\n        //FetchDoGet(\"/blog/v1/statistic/statisticTopic\")\n\n      \n\n    }\n\n    render(){\n\n        return(\n            <BackBlogGround\n            leftSpan={0}\n            rightSpan={24}\n            extra={\n                <Card\n                title={\"更新文章\"}\n                extra={\n                    <Button type=\"primary\"\n                    onClick={()=>{\n                        let postData={\n                            topicId:this.state.topicId,\n                            topicText:this.state.markdownvalue,\n                            topicName:this.state.topicName,\n                            topicDesc:this.state.topicDesc,\n                            topicType:this.state.topicType\n                        }\n                        console.log(postData)\n\n                        AjaxDoPost(\"/blog/v1/topic/updateTopicForReact\",(response)=>{\n                            MessageAlter(\"success\",response)\n                            // window.location.href=\"/private-zone\"\n                        },\n                        postData)\n\n                        // FetchDoPost(\"/blog/v1/topic/updateTopicForReact\",(response)=>{\n                        //     MessageAlter(\"success\",response)\n                        //     // window.location.href=\"/private-zone\"\n                        // },postData)\n                    }}\n                    >\n                        保存\n                    </Button>\n                }\n                >\n                    <Row gutter={[16,16]}>\n                        <Col span={24}>\n                            <TextField \n                            fullWidth\n                            id=\"topicName\" \n                            value={this.state.topicName}\n                            onChange={(event)=>{\n                                console.log(event.target.value)\n                                this.setState({\n                                    topicName:event.target.value\n                                })\n                            }}\n                            label=\"文章标题\" \n                            variant=\"outlined\" />\n                        </Col>\n                        <Col span={24}>\n                            <TextField \n                            fullWidth\n                            multiline\n                            rowsMax=\"4\"\n                            value={this.state.topicDesc}\n                            onChange={(event)=>{\n                                console.log(event.target.value)\n                                this.setState({\n                                    topicDesc:event.target.value\n                                })\n                            }}\n                            id=\"topicDesc\" \n                            label=\"文章简介\" \n                            variant=\"outlined\" />\n                        </Col>\n                        <Col span={24}>\n                            <TextField \n                            fullWidth\n                            select\n                            helperText=\"请选择文章的类别\"\n                            id=\"topicDesc\" \n                            value={this.state.topicType}\n                            onChange={(event)=>{\n                                this.setState({\n                                    topicType:event.target.value\n                                })\n                            }}\n                            label=\"文章类别\" \n                            variant=\"outlined\">\n                                {this.state.topicTypes.map((item)=>{\n                                    return (\n                                        <MenuItem key={item.value} value={item.value}>\n                                            {item.label}\n                                        </MenuItem>\n                                    )\n                                })}\n                            </TextField>\n                        </Col>\n                        <Col span={24}>\n                            <Editor\n                            style={{width:\"100%\"}}\n                            placeholder={\"请输入文章的信息\"}\n                            ref={this.$vm}\n                            addImg={(file)=>{\n                                const _this=this;\n                                const file2=new FormData()\n                                file2.append(\"file\",file)\n                                console.log(file)\n                                FetchDoUploadFile(\"/blog/v1/file/imageUpload4React\",file2,(response)=>{\n                                    //console.log(response)\n                                    _this.$vm.current.$img2Url(response.fileName, response.fileName)\n                                    \n                                })\n                                \n                            }}\n                            value={this.state.markdownvalue} onChange={(value) =>{\n                                //console.log(value)\n                                this.setState({\n                                    markdownvalue:value\n                                })\n                                //console.log(this.state.markdownvalue)\n                            }} />\n                        </Col>\n                    </Row>\n                    <Input/>\n\n                </Card>\n            }\n            />\n        )\n    }\n\n}\n\nexport default withRouter(UpdateTopic)"]},"metadata":{},"sourceType":"module"}