{"ast":null,"code":"var _jsxFileName = \"/Users/breakpoint/npm_work/test-app/src/commons/Utils.js\";\nimport React from 'react';\nimport { fetch as fetchPolyfill } from 'whatwg-fetch';\nimport { BrowserRouter as Router, Route, Link, Redirect, withRouter } from \"react-router-dom\";\nimport LoginMod from './../login/Signin';\nimport 'antd/dist/antd.css';\nimport { Button, notification, message } from 'antd';\n/**\n * 我们的基本的工具\n */\n\nconst prefix = \"http://api.breakpoint.vip/\"; //const prefix=\"http://localhost:8090/\";\n\nconst openNotificationWithIcon = type => {\n  notification[type]({\n    message: 'Notification Title',\n    description: 'This is the content of the notification. This is the content of the notification. This is the content of the notification.'\n  });\n};\n\nconst showConfirm = function (title, content) {\n  confirm({\n    title: title,\n    icon: React.createElement(ExclamationCircleOutlined, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28\n      },\n      __self: this\n    }),\n    content: content,\n    cancelButtonProps: {\n      disabled: true\n    },\n\n    onOk() {\n      console.log('OK');\n    },\n\n    onCancel() {\n      console.log('Cancel');\n    }\n\n  });\n};\n\nfunction showDeleteConfirm() {\n  confirm({\n    title: 'Are you sure delete this task?',\n    icon: React.createElement(ExclamationCircleOutlined, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }),\n    content: 'Some descriptions',\n    okText: 'Yes',\n    okType: 'danger',\n    cancelText: 'No',\n\n    onOk() {\n      console.log('OK');\n    },\n\n    onCancel() {\n      console.log('Cancel');\n    }\n\n  });\n}\n/**\n * \n * @param {*} url  请求的url\n * @param {*} callback  回掉函数\n * @param {*} paramMap  请求参数\n */\n\n\nexport function FetchDoGet(url, callback, paramMap, isAlert) {\n  //let prex=prefix[1]\n  console.log(\"prefx\", prefix);\n  let moreStr = \"?\";\n\n  if (null != paramMap && undefined != paramMap) {\n    const keys = Object.keys(paramMap);\n\n    for (var index in keys) {\n      {\n        moreStr = moreStr + \"&\" + keys[index] + \"=\" + paramMap[keys[index]];\n      }\n    }\n  }\n\n  const token = localStorage.getItem(\"user_token\");\n  moreStr = moreStr + \"&token=\" + token;\n  fetch(prefix + url + moreStr, {\n    method: \"GET\"\n  }).then(function (response) {\n    return response.json();\n  }).then(function (json) {\n    console.log(isAlert);\n\n    if (undefined == isAlert || null == isAlert || isAlert) {\n      if (json.respCode === 200) {\n        if (null != callback && undefined != callback) {\n          callback(json.data);\n        }\n      } else if (json.respCode === 300) {//alert(json.data)\n        //openNotificationWithIcon('warning')\n        //window.location.href=\"/login\"\n      } else {\n        //alert(json.data)\n        message.warning(json.data); //openNotificationWithIcon('warning')\n      }\n    } else {\n      callback(json);\n    }\n\n    console.log(json);\n  });\n}\n/**\n * post 的请求操作\n * @param {*} url  请求的路径\n * @param {*} callback  回掉的函数\n * @param {*} paramMap  请求的参数\n */\n\nexport function FetchDoPost(url, callback, paramMap) {\n  console.log(\"prefx\", prefix);\n  let data = {};\n\n  if (null != paramMap && undefined != paramMap) {\n    data = paramMap;\n  }\n\n  let moreStr = \"?\";\n\n  if (null != paramMap && undefined != paramMap) {\n    const keys = Object.keys(paramMap);\n\n    for (var index in keys) {\n      {\n        moreStr = moreStr + \"&\" + keys[index] + \"=\" + paramMap[keys[index]];\n      }\n    }\n  }\n\n  console.log(\"data\", data);\n  const token = localStorage.getItem(\"user_token\");\n  moreStr = moreStr + \"&token=\" + token;\n  fetch(prefix + url + moreStr, {\n    method: \"POST\",\n    // mode: 'cors',\n    // credentials: 'include',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'\n    },\n    body: JSON.stringify(data)\n  }).then(function (response) {\n    return response.json();\n  }).then(function (json) {\n    if (json.respCode == 200) {\n      if (null != callback && undefined != callback) {\n        callback(json.data);\n      }\n    } else if (json.respCode == 300) {\n      //alert(json.data)\n      //return <Redirect to=\"/login\" />;\n      window.location.href = \"/login\";\n    } else {\n      alert(json.data);\n    }\n\n    console.log(json);\n  });\n}","map":{"version":3,"sources":["/Users/breakpoint/npm_work/test-app/src/commons/Utils.js"],"names":["React","fetch","fetchPolyfill","BrowserRouter","Router","Route","Link","Redirect","withRouter","LoginMod","Button","notification","message","prefix","openNotificationWithIcon","type","description","showConfirm","title","content","confirm","icon","cancelButtonProps","disabled","onOk","console","log","onCancel","showDeleteConfirm","okText","okType","cancelText","FetchDoGet","url","callback","paramMap","isAlert","moreStr","undefined","keys","Object","index","token","localStorage","getItem","method","then","response","json","respCode","data","warning","FetchDoPost","headers","body","JSON","stringify","window","location","href","alert"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {fetch as fetchPolyfill} from 'whatwg-fetch'\nimport { BrowserRouter as Router,Route,Link,Redirect, withRouter} from \"react-router-dom\";\nimport LoginMod from './../login/Signin'\n\nimport 'antd/dist/antd.css';\nimport { Button, notification,message } from 'antd';\n\n/**\n * 我们的基本的工具\n */\nconst prefix=\"http://api.breakpoint.vip/\";\n//const prefix=\"http://localhost:8090/\";\n\n\nconst openNotificationWithIcon = type => {\n    notification[type]({\n      message: 'Notification Title',\n      description:\n        'This is the content of the notification. This is the content of the notification. This is the content of the notification.',\n    });\n};\n\n\nconst  showConfirm=function(title,content) {\n    confirm({\n      title: title,\n      icon: <ExclamationCircleOutlined />,\n      content: content,\n      cancelButtonProps: {\n        disabled: true,\n      },\n      onOk() {\n        console.log('OK');\n      },\n      onCancel() {\n        console.log('Cancel');\n      },\n    });\n  }\n  \n  function showDeleteConfirm() {\n    confirm({\n      title: 'Are you sure delete this task?',\n      icon: <ExclamationCircleOutlined />,\n      content: 'Some descriptions',\n      okText: 'Yes',\n      okType: 'danger',\n      cancelText: 'No',\n      onOk() {\n        console.log('OK');\n      },\n      onCancel() {\n        console.log('Cancel');\n      },\n    });\n  }\n\n\n\n/**\n * \n * @param {*} url  请求的url\n * @param {*} callback  回掉函数\n * @param {*} paramMap  请求参数\n */\nexport function FetchDoGet(url,callback,paramMap,isAlert){\n    //let prex=prefix[1]\n    console.log(\"prefx\",prefix)\n    let moreStr=\"?\"\n    if(null!=paramMap&&undefined!=paramMap){\n        const keys=Object.keys(paramMap);\n        for(var index in keys){\n            {moreStr=moreStr+\"&\"+keys[index]+\"=\"+paramMap[keys[index]]}\n        }\n    }\n\n    const token=localStorage.getItem(\"user_token\");\n    moreStr=moreStr+\"&token=\"+token\n    fetch(prefix+url+moreStr,{\n        method:\"GET\",\n    }).then(function(response){\n        return response.json()\n    }).then(function(json){\n        console.log(isAlert);\n        if(undefined==isAlert||null==isAlert||isAlert){\n            if(json.respCode===200){\n                if(null!=callback&&undefined!=callback){\n                    callback(json.data) \n                }\n            }else if(json.respCode===300){\n                //alert(json.data)\n                //openNotificationWithIcon('warning')\n                 //window.location.href=\"/login\"\n            }else{\n                //alert(json.data)\n                message.warning(json.data);\n                //openNotificationWithIcon('warning')\n            }\n        }else{\n            callback(json) \n        }\n       console.log(json)\n    });\n}\n\n/**\n * post 的请求操作\n * @param {*} url  请求的路径\n * @param {*} callback  回掉的函数\n * @param {*} paramMap  请求的参数\n */\nexport function FetchDoPost(url,callback,paramMap){\n    console.log(\"prefx\",prefix)\n    let data={}\n    if(null!=paramMap&&undefined!=paramMap){\n        data=paramMap\n    }\n\n    let moreStr=\"?\"\n    if(null!=paramMap&&undefined!=paramMap){\n        const keys=Object.keys(paramMap);\n        for(var index in keys){\n            {moreStr=moreStr+\"&\"+keys[index]+\"=\"+paramMap[keys[index]]}\n        }\n    }\n    console.log(\"data\",data);\n    const token=localStorage.getItem(\"user_token\");\n    moreStr=moreStr+\"&token=\"+token\n    fetch(prefix+url+moreStr,{\n        method:\"POST\",\n        // mode: 'cors',\n        // credentials: 'include',\n        headers: {\n            'Accept': 'application/json', \n            'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'\n          },\n        body:JSON.stringify(data)\n    }).then(function(response){\n        return response.json()\n    }).then(function(json){\n        if(json.respCode==200){\n            if(null!=callback&&undefined!=callback){\n                callback(json.data)   \n            }\n        }else if(json.respCode==300){\n            //alert(json.data)\n            //return <Redirect to=\"/login\" />;\n            window.location.href=\"/login\"\n        }else{\n            alert(json.data)\n        }\n       console.log(json)\n    });\n\n}"]},"metadata":{},"sourceType":"module"}