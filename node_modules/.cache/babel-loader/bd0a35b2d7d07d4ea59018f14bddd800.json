{"ast":null,"code":"import _classCallCheck from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'./ImageMagage.css';import{withRouter}from'react-router-dom';import{Card,Row,Col,Tag,Avatar,Button,Upload}from'antd';import BackBlogGround from'./BackBlogGround';import LocalIconFont from'../../components/LocalIconFont';import{AjaxDoPost,FetchDoUploadFile}from'../../commons/Utils';import TabbleUtils from'../../components/TabbleUtils';import Zmage from'react-zmage';import{TextField}from'@material-ui/core';var columns=[{title:'ID',width:30,dataIndex:'id',key:'id',fixed:'left',// ellipsis:true,\nalign:\"tenter\"},{title:'图片',width:80,dataIndex:'type',align:\"tenter\",render:function render(text,record,index){return(// <Avatar src={record.aPhoto}/>\nReact.createElement(Zmage,{style:{width:\"50px\"},src:record.aPhoto}));}},{title:'描述',width:80,dataIndex:'aMsg',align:\"tenter\"},{title:'位置',width:80,dataIndex:'aLocaltion',// ellipsis:true,\nalign:\"tenter\"},// {\n//     title: '是否展示',\n//     width: 80,\n//     dataIndex: 'type',\n//     align:\"tenter\",\n//     render:(text, record, index) => {\n//         return(\n//             (record.type==0)?(\n//                 <Tag color=\"green\">已发布</Tag>\n//             ):(\n//                 <Tag color=\"red\">未发布</Tag>\n//             )\n//         )\n//     }\n// },\n{title:'发布时间',width:120,dataIndex:'gmtCreate',align:\"tenter\"},{title:'操作',key:'operation',fixed:'right',align:\"tenter\",width:120,render:function render(text,record,index){//console.log(\"row\",record);\n//const _this=this;\nreturn React.createElement(\"div\",{style:{height:\"40px\"}},React.createElement(\"span\",{style:{float:\"left\",width:\"45%\",marginLeft:\"3px\"}},React.createElement(Button,{type:\"primary\",ghost:false,style:{backgroundColor:\"#389e0d\",border:\"none\",float:\"left\"},icon:React.createElement(LocalIconFont,{type:\"icon-edit\"})// onClick={()=>{\n//     //const _this=this;\n//     AjaxDoPost(\"/v1/liuyan/publicComments\",(response)=>{\n//         window.location.href='/comments-site-manage'\n//     },\n//     {\n//         commentId:record.id\n//     })\n// }}\n},\"\\u64CD\\u4F5C\")));}}];/**\n * 我们照片的基本管理\n */var ImageMagage=/*#__PURE__*/function(_React$Component){_inherits(ImageMagage,_React$Component);function ImageMagage(props){var _this;_classCallCheck(this,ImageMagage);_this=_possibleConstructorReturn(this,_getPrototypeOf(ImageMagage).call(this,props));_this.state={requestUrl:\"/blog/v1/album/selectPhotos\",pictrueUrl:\"\",oriFileName:'',msg:\"\",location:\"\",tableKey:Math.random()};return _this;}_createClass(ImageMagage,[{key:\"render\",value:function render(){var _this2=this;var _this=this;return React.createElement(BackBlogGround,{leftSpan:0,rightSpan:24,extra:React.createElement(Row,{gutter:[16,16]},React.createElement(Col,{span:24},React.createElement(Card,{className:\"image-manage-upload-image\",title:\"上传图片\"},React.createElement(\"div\",{className:\"item\"},React.createElement(Zmage,{style:{width:\"400px\"},alt:\"\\u5F85\\u4E0A\\u4F20\\u7167\\u7247\",src:this.state.pictrueUrl})),React.createElement(\"div\",{className:\"item\"},React.createElement(Upload,{showUploadList:false,customRequest:function customRequest(option){var formData=new FormData();formData.append('file',option.file);//上传文件\nFetchDoUploadFile(\"/blog/v1/file/imageUpload4React\",formData,function(response){console.log(response);_this.setState({pictrueUrl:response.fileName,oriFileName:response.oriFileName});});}},React.createElement(Button,null,\"\\u9009\\u62E9\\u7167\\u7247\")),React.createElement(\"div\",{className:\"item\"},React.createElement(TextField,{label:\"\\u7167\\u7247\\u63CF\\u8FF0\",fullWidth:true,variant:\"outlined\",color:\"secondary\",value:this.state.msg,onChange:function onChange(event){_this2.setState({msg:event.target.value});}})),React.createElement(\"div\",{className:\"item\"},React.createElement(TextField,{label:\"\\u4F4D\\u7F6E\\u4FE1\\u606F\",fullWidth:true,variant:\"outlined\",color:\"secondary\",value:this.state.location,onChange:function onChange(event){_this2.setState({location:event.target.value});}})),React.createElement(\"div\",{className:\"item\"},React.createElement(Button,{type:\"primary\",onClick:function onClick(){var _this=_this2;var data={photoPath:_this2.state.pictrueUrl,msg:_this2.state.msg,location:_this2.state.location};AjaxDoPost(\"/blog/v1/album/addPhoto\",function(response){_this.setState({photoPath:\"\",msg:\"\",location:\"\",tableKey:Math.random()});},data);}},\"\\u4FDD\\u5B58\"))))),React.createElement(Col,{span:24},React.createElement(Card,{title:\"照片的管理\",extra:React.createElement(\"div\",null,\"\\u60A8\\u7684\\u4F4D\\u7F6E\\uFF1A\\u7F51\\u7AD9\\u76F8\\u518C\\u7684\\u7EF4\\u62A4\")},React.createElement(TabbleUtils,{key:this.state.tableKey,columns:columns// searchParams={}\n,requestUrl:this.state.requestUrl}))))});}}]);return ImageMagage;}(React.Component);export default withRouter(ImageMagage);","map":{"version":3,"sources":["/Users/breakpoint/npm_work/test-app/src/router/back/ImageMagage.js"],"names":["React","withRouter","Card","Row","Col","Tag","Avatar","Button","Upload","BackBlogGround","LocalIconFont","AjaxDoPost","FetchDoUploadFile","TabbleUtils","Zmage","TextField","columns","title","width","dataIndex","key","fixed","align","render","text","record","index","aPhoto","height","float","marginLeft","backgroundColor","border","ImageMagage","props","state","requestUrl","pictrueUrl","oriFileName","msg","location","tableKey","Math","random","_this","option","formData","FormData","append","file","response","console","log","setState","fileName","event","target","value","data","photoPath","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport './ImageMagage.css'\nimport { withRouter } from 'react-router-dom'\nimport {Card,Row,Col,Tag,Avatar,Button,Upload} from 'antd'\nimport BackBlogGround from './BackBlogGround'\nimport LocalIconFont from '../../components/LocalIconFont'\nimport { AjaxDoPost,FetchDoUploadFile } from '../../commons/Utils'\nimport TabbleUtils from '../../components/TabbleUtils'\nimport Zmage from 'react-zmage'\nimport { TextField } from '@material-ui/core'\n\nconst columns = [\n    {\n        title: 'ID',\n        width: 30,\n        dataIndex: 'id',\n        key: 'id',\n        fixed: 'left',\n        // ellipsis:true,\n        align:\"tenter\"\n    },\n    {\n        title: '图片',\n        width: 80,\n        dataIndex: 'type',\n        align:\"tenter\",\n        render:(text, record, index) => {\n            \n            return(\n                // <Avatar src={record.aPhoto}/>\n                <Zmage\n                style={{width:\"50px\"}}\n                 src={record.aPhoto}/>\n            )\n        }\n    },\n    {\n        title: '描述',\n        width: 80,\n        dataIndex: 'aMsg',\n        align:\"tenter\"\n    },\n    {\n        title: '位置',\n        width: 80,\n        dataIndex: 'aLocaltion',\n        // ellipsis:true,\n        align:\"tenter\"\n    },\n    // {\n    //     title: '是否展示',\n    //     width: 80,\n    //     dataIndex: 'type',\n    //     align:\"tenter\",\n    //     render:(text, record, index) => {\n            \n    //         return(\n    //             (record.type==0)?(\n    //                 <Tag color=\"green\">已发布</Tag>\n    //             ):(\n    //                 <Tag color=\"red\">未发布</Tag>\n    //             )\n    //         )\n    //     }\n    // },\n    {\n        title: '发布时间',\n        width: 120,\n        dataIndex: 'gmtCreate',\n        align:\"tenter\"\n    },\n    {\n        title: '操作',\n        key: 'operation',\n        fixed: 'right',\n        align:\"tenter\",\n        width: 120,\n        render: (text, record, index) => {\n            //console.log(\"row\",record);\n            //const _this=this;\n            return (\n                <div style={{height:\"40px\"}}>\n                    <span style={{float:\"left\",width:\"45%\",marginLeft:\"3px\"}}>\n                        <Button type=\"primary\"\n                        ghost={false} \n                        style={{backgroundColor:\"#389e0d\",border:\"none\",float:\"left\"}}\n                        icon={<LocalIconFont type=\"icon-edit\" />}\n                        // onClick={()=>{\n                        //     //const _this=this;\n                        //     AjaxDoPost(\"/v1/liuyan/publicComments\",(response)=>{\n                        //         window.location.href='/comments-site-manage'\n                        //     },\n                        //     {\n                        //         commentId:record.id\n                        //     })\n                        // }}\n                        >\n                            操作\n                        </Button>  \n                    </span>\n                    {/* <span style={{float:\"left\",width:\"45%\",marginLeft:\"4px\"}}>\n                    <Button type=\"danger\"\n                        ghost={false} \n                        style={{backgroundColor:\"#f44336\",border:\"none\",float:\"left\"}}\n                        icon={<LocalIconFont type=\"icon-edit\" />}\n                        >\n                        冻结</Button>\n                    </span> */}\n                </div>\n            )\n        },\n    },\n];\n/**\n * 我们照片的基本管理\n */\nclass ImageMagage extends React.Component{\n\n    constructor(props){\n        super(props)\n        this.state={\n            requestUrl:\"/blog/v1/album/selectPhotos\",\n            pictrueUrl:\"\",\n            oriFileName:'',\n            msg:\"\",\n            location:\"\",\n            tableKey:Math.random()\n        }\n\n    }\n\n    render(){\n\n        const _this=this;\n\n        return(\n            <BackBlogGround\n            leftSpan={0}\n            rightSpan={24}\n            extra={\n                <Row gutter={[16,16]}>\n                    <Col span={24}>\n                        <Card\n                        className=\"image-manage-upload-image\"\n                        title={\"上传图片\"}\n                        >\n                            <div className=\"item\">\n                                <Zmage\n                                style={{width:\"400px\"}}\n                                 alt=\"待上传照片\" src={this.state.pictrueUrl}/>\n                            </div>\n                            <div className=\"item\">\n                                <Upload showUploadList={false} customRequest={(option)=>{\n                                    const formData = new FormData(); formData.append('file',option.file);\n                                    //上传文件\n                                    FetchDoUploadFile(\"/blog/v1/file/imageUpload4React\",formData,function(response){ console.log(response)\n                                    _this.setState({ pictrueUrl:response.fileName, oriFileName:response.oriFileName\n                                    }) })\n                                    }} >\n                                        <Button >\n                                            选择照片\n                                        </Button>\n                                </Upload>\n                                <div className=\"item\">\n                                    <TextField\n                                    label=\"照片描述\"\n                                    fullWidth\n                                    variant=\"outlined\"\n                                    color=\"secondary\"\n                                    value={this.state.msg}\n                                    onChange={(event)=>{\n                                        this.setState({\n                                            msg:event.target.value\n                                        })\n                                    }}\n                                    />\n                                </div>\n                                <div className=\"item\">\n                                    <TextField\n                                    label=\"位置信息\"\n                                    fullWidth\n                                    variant=\"outlined\"\n                                    color=\"secondary\"\n                                    value={this.state.location}\n                                    onChange={(event)=>{\n                                        this.setState({\n                                            location:event.target.value\n                                        })\n                                    }}\n                                    />\n                                </div>\n                                <div className=\"item\">\n                                    <Button type=\"primary\"\n                                    onClick={()=>{\n                                        const _this=this;\n                                        let data={\n                                            photoPath:this.state.pictrueUrl,\n                                            msg:this.state.msg,\n                                            location:this.state.location\n                                        }\n\n                                        AjaxDoPost(\"/blog/v1/album/addPhoto\",(response)=>{\n                                            _this.setState({\n                                                photoPath:\"\",\n                                                msg:\"\",\n                                                location:\"\",\n                                                tableKey:Math.random()\n                                            })\n                                        },\n                                        data);\n                                    }}\n                                    >\n                                        保存\n                                    </Button>\n                                </div>\n                            </div>\n                        </Card>\n                    </Col>\n                    <Col span={24}>\n                        <Card \n                        title={\"照片的管理\"}\n                        extra={\n                            <div>您的位置：网站相册的维护</div>\n                        }\n                        >\n\n                    <TabbleUtils\n                    key={this.state.tableKey}\n                    columns={columns}\n                    // searchParams={}\n                    requestUrl={this.state.requestUrl}\n                    />\n                            \n                        </Card>\n                    </Col>\n                </Row>\n            }\n            />\n        )\n    }\n\n}\n\nexport default withRouter(ImageMagage)"]},"metadata":{},"sourceType":"module"}