{"ast":null,"code":"import _classCallCheck from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'./CommentSite.css';import{withRouter}from'react-router-dom';import{List,Card,Comment,Pagination,Tag,Row,Col,Form,Input,Button,Collapse}from'antd';import BlogCommonBackGround from'../../components/blog/BlogCommonBackGround';import{FetchDoGet,FetchDoPost}from'../../commons/Utils';import moment from'moment';import PorpularArticle from'../../components/blog/PorpularArticle';import CommentPanel from'../../components/blog/CommentPanel';/**\n * 我们的留言区域\n */var TextArea=Input.TextArea;/**\n * 我们的留言版本\n */var CommentSite=/*#__PURE__*/function(_React$Component){_inherits(CommentSite,_React$Component);/**\n     * 我们的表单的操作\n     */function CommentSite(props){var _this;_classCallCheck(this,CommentSite);_this=_possibleConstructorReturn(this,_getPrototypeOf(CommentSite).call(this,props));_this.formRef=React.createRef();_this.state={veryfyCode:\"\",verifyCodeKey:\"\",pictureUrl:\"http://file.breakpoint.vip/picture/blog/4d6fb840-b0b5-46ed-9db8-98084c585229.jpeg\",commentpanelkey:Math.random()};return _this;}/**\n     * 初始化的数据\n     */_createClass(CommentSite,[{key:\"componentDidMount\",value:function componentDidMount(){var _this=this;FetchDoGet(\"/blog/v1/image/getKaptcha\",function(response){_this.setState({veryfyCode:response.verifyCode,verifyCodeKey:response.verifyCodeKey});});}},{key:\"render\",value:function render(){var _this2=this;console.log(\"this.formRef.current\",this.formRef.current);return React.createElement(BlogCommonBackGround,{left:React.createElement(Row,{gutter:[16,24]},React.createElement(Col,{span:24},React.createElement(Card,{title:\"感谢支持\"},React.createElement(\"h4\",null,\"\\u60A8\\u7684\\u652F\\u6301\\u662F\\u7ED9\\u6211\\u6700\\u5927\\u7684\\u9F13\\u52B1!!!!!\"))),React.createElement(Col,{span:24},React.createElement(PorpularArticle,{title:\"文章推荐\"}))),extra:React.createElement(Row,{gutter:[16,24]},React.createElement(Col,{span:24},React.createElement(Card,{cover:React.createElement(\"img\",{src:\"http://myblogadmin.breakpoint.vip/image/liuyan.jpg\"})},React.createElement(Collapse,{bordered:false,onChange:function onChange(){}},React.createElement(Collapse.Panel,{header:React.createElement(\"div\",null,React.createElement(\"span\",null,\"\\u70B9\\u51FB\\u6211\\uFF0C\\u7559\\u4E0B\\u5BF9\\u6211\\u60F3\\u8BF4\\u7684\\u8BDD\",React.createElement(Tag,{style:{marginLeft:\"10px\"},color:\"#fa541c\"},\"here\"))),key:\"1\"},React.createElement(\"div\",{className:\"comments-form-outer\"},React.createElement(Form// layout={\"vertical\"}\n,{size:\"middle\",ref:this.formRef,name:\"comment-form\",onFinish:function onFinish(values){console.log(values);var _this=_this2;values['verifyCodeKey']=_this2.state.verifyCodeKey;values['pictureUrl']=_this2.state.pictureUrl;FetchDoPost(\"/v1/liuyan/save\",function(response){//console.log(this.formRef.current)\n_this.formRef.current.setFieldsValue({message:\"\",userName:\"\",verifyCode:\"\"});_this.setState({commentpanelkey:Math.random()});},values);}},React.createElement(Form.Item,{name:\"message\"// label=\"留言信息\" \n// help={\"您的留言信息\"}\n,rules:[{required:true,message:\"请输入留言信息并且字数在5-200之间\",max:200,min:5}]},React.createElement(TextArea,{placeholder:\"请输入留言信息\",allowClear:true,autoSize:{minRows:2,maxRows:6}})),React.createElement(Form.Item,{name:\"userName\"// label=\"你的称呼\"\n,rules:[{required:true,message:\"请输入您的称呼并且字数在1-15之间\",max:15,min:1}]},React.createElement(Input,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u60A8\\u7684\\u79F0\\u547C\"})),React.createElement(Form.Item,{name:\"verifyCode\"// label=\"验证码\" \n,rules:[{required:true,message:\"请输入验证码\"}]},React.createElement(Input,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u9A8C\\u8BC1\\u7801\",suffix:React.createElement(\"img\",{style:{cursor:\"pointer\"},src:this.state.veryfyCode,onClick:function onClick(){var _this=_this2;FetchDoGet(\"/blog/v1/image/getKaptcha\",function(response){_this.setState({veryfyCode:response.verifyCode,veryfyCodeKey:response.verifyCodeKey});});}})})),React.createElement(Form.Item,null,React.createElement(Button,{type:\"primary\",htmlType:\"submit\"},\"\\u53D1\\u8868\")))))))),React.createElement(Col,{span:24},React.createElement(CommentPanel,{key:this.state.commentpanelkey})))});}}]);return CommentSite;}(React.Component);export default withRouter(CommentSite);","map":{"version":3,"sources":["/Users/breakpoint/npm_work/test-app/src/router/blog/CommentSite.js"],"names":["React","withRouter","List","Card","Comment","Pagination","Tag","Row","Col","Form","Input","Button","Collapse","BlogCommonBackGround","FetchDoGet","FetchDoPost","moment","PorpularArticle","CommentPanel","TextArea","CommentSite","props","formRef","createRef","state","veryfyCode","verifyCodeKey","pictureUrl","commentpanelkey","Math","random","_this","response","setState","verifyCode","console","log","current","marginLeft","values","setFieldsValue","message","userName","required","max","min","minRows","maxRows","cursor","veryfyCodeKey","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport './CommentSite.css'\nimport { withRouter } from 'react-router-dom'\nimport {List,Card,Comment,Pagination,Tag,Row,Col,Form,Input,Button,Collapse} from 'antd'\nimport BlogCommonBackGround from '../../components/blog/BlogCommonBackGround'\nimport { FetchDoGet, FetchDoPost } from '../../commons/Utils'\nimport moment from 'moment';\nimport PorpularArticle from '../../components/blog/PorpularArticle'\nimport CommentPanel from '../../components/blog/CommentPanel'\n\n\n/**\n * 我们的留言区域\n */\nconst { TextArea } = Input;\n/**\n * 我们的留言版本\n */\nclass CommentSite extends React.Component{\n\n    /**\n     * 我们的表单的操作\n     */\n    formRef = React.createRef();\n\n    constructor(props){\n        super(props)\n        this.state={\n            veryfyCode:\"\",\n            verifyCodeKey:\"\",\n            pictureUrl:\"http://file.breakpoint.vip/picture/blog/4d6fb840-b0b5-46ed-9db8-98084c585229.jpeg\",                   \n            commentpanelkey:Math.random()\n            \n\n        }\n    }\n\n    /**\n     * 初始化的数据\n     */\n    componentDidMount(){\n        const _this=this;\n\n        FetchDoGet(\"/blog/v1/image/getKaptcha\",(response)=>{\n            _this.setState({\n                veryfyCode:response.verifyCode,\n                verifyCodeKey:response.verifyCodeKey\n            })\n        })\n\n    }\n\n    render(){\n        console.log(\"this.formRef.current\",this.formRef.current)\n        return(\n            <BlogCommonBackGround\n            left={\n                <Row gutter={[16,24]}>\n                    <Col span={24}>\n                        <Card title={\"感谢支持\"}>\n                            <h4>您的支持是给我最大的鼓励!!!!!</h4>\n                        </Card>\n                    </Col>\n                    <Col span={24}>\n                        <PorpularArticle\n                        title={\"文章推荐\"}\n                        />\n                    </Col>\n                </Row>\n            }\n            extra={\n                <Row gutter={[16,24]}>\n                    <Col span={24}>\n                        <Card\n                        cover={\n                            <img src=\"http://myblogadmin.breakpoint.vip/image/liuyan.jpg\"/>\n                        }\n                        >\n                            <Collapse \n                            bordered={false}\n                            onChange={()=>{}}>\n                                <Collapse.Panel header={\n                                    <div>\n                                        <span>点击我，留下对我想说的话<Tag style={{marginLeft:\"10px\"}} color=\"#fa541c\">here</Tag></span>\n                                    </div>\n                                } key=\"1\">\n                                <div className=\"comments-form-outer\">\n                                    <Form \n                                    // layout={\"vertical\"}\n                                    size={\"middle\"}\n                                    ref={this.formRef} \n                                    name={\"comment-form\"} \n                                    onFinish={(values)=>{\n                                        console.log(values)\n                                        const _this=this;\n                                        values['verifyCodeKey']=this.state.verifyCodeKey;\n                                        values['pictureUrl']=this.state.pictureUrl;\n                                        FetchDoPost(\"/v1/liuyan/save\",(response)=>{\n                                            //console.log(this.formRef.current)\n                                            _this.formRef.current.setFieldsValue({\n                                                message:\"\",\n                                                userName:\"\",\n                                                verifyCode:\"\"\n                                            })\n                                            _this.setState({\n                                                commentpanelkey:Math.random()\n                                            })\n                                        },values)\n                                        \n\n                                    }}>\n                                        <Form.Item \n                                        name=\"message\" \n                                        // label=\"留言信息\" \n                                        // help={\"您的留言信息\"}\n                                        rules={[{ \n                                            required: true ,\n                                            message:\"请输入留言信息并且字数在5-200之间\",\n                                            max:200,\n                                            min:5\n                                        }]}>\n                                            <TextArea\n                                            placeholder={\"请输入留言信息\"}\n                                            allowClear={true}\n                                            autoSize={{ minRows: 2, maxRows: 6 }}\n                                            />\n                                        </Form.Item>\n                                        <Form.Item \n                                        name=\"userName\" \n                                        // label=\"你的称呼\"\n                                        rules={[{ \n                                            required: true ,\n                                            message:\"请输入您的称呼并且字数在1-15之间\",\n                                            max:15,\n                                            min:1\n                                            }]}>\n                                            <Input \n                                            placeholder=\"请输入您的称呼\"\n                                            />\n                                            \n                                        </Form.Item>\n                                        <Form.Item \n                                        name=\"verifyCode\" \n                                        // label=\"验证码\" \n                                        rules={[{ \n                                            required: true ,\n                                            message:\"请输入验证码\",\n                                            }]}>\n                                            <Input \n                                            placeholder=\"请输入验证码\"\n                                            suffix={\n                                                <img style={{cursor:\"pointer\"}} src={this.state.veryfyCode}\n                                                onClick={()=>{\n                                                    const _this=this;\n                                                    FetchDoGet(\"/blog/v1/image/getKaptcha\",(response)=>{\n                                                        _this.setState({\n                                                            veryfyCode:response.verifyCode,\n                                                            veryfyCodeKey:response.verifyCodeKey\n                                                        })\n                                                    })\n                                                }}\n                                                />\n                                            }\n                                            />\n                                        </Form.Item>\n                                        <Form.Item>\n                                            <Button type=\"primary\" htmlType=\"submit\">\n                                                发表\n                                            </Button>\n                                        </Form.Item>\n\n                                    </Form>\n                                </div>\n                                </Collapse.Panel>\n                            </Collapse>\n                            \n                        </Card>\n                    </Col>\n                    <Col span={24}>\n                        <CommentPanel\n                        key={this.state.commentpanelkey}\n                        />\n                    </Col>\n                </Row>\n                \n            }\n            />\n        )\n    }\n\n}\n\nexport default withRouter(CommentSite)"]},"metadata":{},"sourceType":"module"}