{"ast":null,"code":"var _jsxFileName = \"/Users/breakpoint/npm_work/test-app/src/router/blog/CommentSite.js\";\nimport React from 'react';\nimport './CommentSite.css';\nimport { withRouter } from 'react-router-dom';\nimport { List, Card, Comment, Pagination, Tag, Row, Col, Form, Input, Button } from 'antd';\nimport BlogCommonBackGround from '../../components/blog/BlogCommonBackGround';\nimport { FetchDoGet } from '../../commons/Utils';\nimport moment from 'moment';\nimport PorpularArticle from '../../components/blog/PorpularArticle';\n/**\n * 我们的留言区域\n */\n\nconst {\n  TextArea\n} = Input;\n/**\n * 我们的留言版本\n */\n\nclass CommentSite extends React.Component {\n  /**\n   * 我们的表单的操作\n   */\n  constructor(props) {\n    super(props);\n    this.formRef = React.createRef();\n    this.state = {\n      requestUrl: \"/v1/liuyan/getYouLiuYanList\",\n      veryfyCode: \"\",\n      veryfyCodeKey: \"\",\n      comments: [],\n      pageInfo: {}\n    };\n  }\n  /**\n   * 初始化的数据\n   */\n\n\n  componentDidMount() {\n    const _this = this;\n\n    FetchDoGet(this.state.requestUrl, response => {\n      _this.setState({\n        comments: response.data,\n        pageInfo: response\n      });\n    });\n    FetchDoGet(\"/blog/v1/image/getKaptcha\", response => {\n      _this.setState({\n        veryfyCode: response.verifyCode,\n        veryfyCodeKey: response.verifyCodeKey\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(BlogCommonBackGround, {\n      left: React.createElement(Row, {\n        gutter: [16, 24],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(Card, {\n        title: \"感谢支持\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \"\\u60A8\\u7684\\u652F\\u6301\\u662F\\u7ED9\\u6211\\u6700\\u5927\\u7684\\u9F13\\u52B1!!!!!\"))), React.createElement(Col, {\n        span: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(PorpularArticle, {\n        title: \"文章推荐\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }))),\n      extra: React.createElement(Row, {\n        gutter: [16, 24],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(Card, {\n        cover: React.createElement(\"img\", {\n          src: \"https://blog.breakpoint.vip/image/liuyan.jpg\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"comments-form-outer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(Form // layout={\"vertical\"}\n      , {\n        size: \"middle\",\n        ref: this.formRef,\n        name: \"comment-form\",\n        onFinish: values => {\n          console.log(values);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(Form.Item, {\n        name: \"message\" // label=\"留言信息\" \n        // help={\"您的留言信息\"}\n        ,\n        rules: [{\n          required: true,\n          message: \"请输入留言信息并且字数在5-200之间\",\n          max: 200,\n          min: 5\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(TextArea, {\n        placeholder: \"请输入留言信息\",\n        allowClear: true,\n        autoSize: {\n          minRows: 2,\n          maxRows: 6\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      })), React.createElement(Form.Item, {\n        name: \"userName\" // label=\"你的称呼\"\n        ,\n        rules: [{\n          required: true,\n          message: \"请输入您的称呼并且字数在1-15之间\",\n          max: 15,\n          min: 1\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Input, {\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u60A8\\u7684\\u79F0\\u547C\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      })), React.createElement(Form.Item, {\n        name: \"verifyCode\" // label=\"验证码\" \n        ,\n        rules: [{\n          required: true,\n          message: \"请输入验证码\"\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(Input, {\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u9A8C\\u8BC1\\u7801\",\n        suffix: React.createElement(\"img\", {\n          style: {\n            cursor: \"pointer\"\n          },\n          src: this.state.veryfyCode,\n          onClick: () => {\n            const _this = this;\n\n            FetchDoGet(\"/blog/v1/image/getKaptcha\", response => {\n              _this.setState({\n                veryfyCode: response.verifyCode,\n                veryfyCodeKey: response.verifyCodeKey\n              });\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      })), React.createElement(Form.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"\\u53D1\\u8868\")))))), React.createElement(Col, {\n        span: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(Card, {\n        title: \"留言板\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(List, {\n        className: \"comment-list\" // header={`${this.state.comments.length} replies`}\n        ,\n        itemLayout: \"horizontal\",\n        dataSource: this.state.comments,\n        pagination: false,\n        footer: React.createElement(Pagination, {\n          showQuickJumper: true,\n          showTotal: (total, range) => {\n            return `当前显示：${range[0]}-${range[1]} 文章 总计 ${total} 篇文章`;\n          },\n          current: this.state.pageInfo.currentPage,\n          defaultPageSize: this.state.pageInfo.pageSize,\n          defaultCurrent: this.state.pageInfo.currentPage,\n          total: this.state.pageInfo.totalCount,\n          onChange: (page, pageSize) => {\n            const _this = this;\n\n            FetchDoGet(this.state.requestUrl, function (response) {\n              console.log(response);\n\n              _this.setState({\n                comments: response.data,\n                pageInfo: response\n              });\n            }, {\n              currentPage: page,\n              pageSize: pageSize\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }),\n        renderItem: item => React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        }, React.createElement(Comment // actions={item.actions}\n        , {\n          author: React.createElement(\"span\", {\n            style: {\n              fontSize: \"14px\",\n              fontWeight: \"bold\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 198\n            },\n            __self: this\n          }, item.userName),\n          avatar: item.pitureUrl,\n          content: React.createElement(\"span\", {\n            style: {\n              fontSize: \"14px\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 204\n            },\n            __self: this\n          }, item.message),\n          datetime: React.createElement(\"span\", {\n            style: {\n              fontSize: \"14px\",\n              fontWeight: \"bold\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 207\n            },\n            __self: this\n          }, \"(\", item.gmtUpdate, \")\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        })),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default withRouter(CommentSite);","map":{"version":3,"sources":["/Users/breakpoint/npm_work/test-app/src/router/blog/CommentSite.js"],"names":["React","withRouter","List","Card","Comment","Pagination","Tag","Row","Col","Form","Input","Button","BlogCommonBackGround","FetchDoGet","moment","PorpularArticle","TextArea","CommentSite","Component","constructor","props","formRef","createRef","state","requestUrl","veryfyCode","veryfyCodeKey","comments","pageInfo","componentDidMount","_this","response","setState","data","verifyCode","verifyCodeKey","render","values","console","log","required","message","max","min","minRows","maxRows","cursor","total","range","currentPage","pageSize","totalCount","page","item","fontSize","fontWeight","userName","pitureUrl","gmtUpdate"],"mappings":"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","sourcesContent":["import React from 'react'\nimport './CommentSite.css'\nimport { withRouter } from 'react-router-dom'\nimport {List,Card,Comment,Pagination,Tag,Row,Col,Form,Input,Button} from 'antd'\nimport BlogCommonBackGround from '../../components/blog/BlogCommonBackGround'\nimport { FetchDoGet } from '../../commons/Utils'\nimport moment from 'moment';\nimport PorpularArticle from '../../components/blog/PorpularArticle'\n\n\n/**\n * 我们的留言区域\n */\nconst { TextArea } = Input;\n/**\n * 我们的留言版本\n */\nclass CommentSite extends React.Component{\n\n    /**\n     * 我们的表单的操作\n     */\n    formRef = React.createRef();\n\n    constructor(props){\n        super(props)\n        this.state={\n            requestUrl:\"/v1/liuyan/getYouLiuYanList\",\n            veryfyCode:\"\",\n            veryfyCodeKey:\"\",\n            comments:[],\n            pageInfo:{}\n\n        }\n    }\n\n    /**\n     * 初始化的数据\n     */\n    componentDidMount(){\n        const _this=this;\n        FetchDoGet(this.state.requestUrl,(response)=>{\n            _this.setState({\n                comments:response.data,\n                pageInfo:response\n            })\n        });\n\n        FetchDoGet(\"/blog/v1/image/getKaptcha\",(response)=>{\n            _this.setState({\n                veryfyCode:response.verifyCode,\n                veryfyCodeKey:response.verifyCodeKey\n            })\n        })\n\n    }\n\n    render(){\n\n        return(\n            <BlogCommonBackGround\n            left={\n                <Row gutter={[16,24]}>\n                    <Col span={24}>\n                        <Card title={\"感谢支持\"}>\n                            <h4>您的支持是给我最大的鼓励!!!!!</h4>\n                        </Card>\n                    </Col>\n                    <Col span={24}>\n                        <PorpularArticle\n                        title={\"文章推荐\"}\n                        />\n                    </Col>\n                </Row>\n            }\n            extra={\n                <Row gutter={[16,24]}>\n                    <Col span={24}>\n                        <Card\n                        cover={\n                            <img src=\"https://blog.breakpoint.vip/image/liuyan.jpg\"/>\n                        }\n                        >\n                            <div className=\"comments-form-outer\">\n                                <Form \n                                // layout={\"vertical\"}\n                                size={\"middle\"}\n                                ref={this.formRef} \n                                name={\"comment-form\"} \n                                onFinish={(values)=>{\n                                    console.log(values)\n\n                                }}>\n                                    <Form.Item \n                                    name=\"message\" \n                                    // label=\"留言信息\" \n                                    // help={\"您的留言信息\"}\n                                    rules={[{ \n                                        required: true ,\n                                        message:\"请输入留言信息并且字数在5-200之间\",\n                                        max:200,\n                                        min:5\n                                    }]}>\n                                        <TextArea\n                                        placeholder={\"请输入留言信息\"}\n                                        allowClear={true}\n                                        autoSize={{ minRows: 2, maxRows: 6 }}\n                                         />\n                                    </Form.Item>\n                                    <Form.Item \n                                    name=\"userName\" \n                                    // label=\"你的称呼\"\n                                     rules={[{ \n                                        required: true ,\n                                        message:\"请输入您的称呼并且字数在1-15之间\",\n                                        max:15,\n                                        min:1\n                                        }]}>\n                                        <Input \n                                        placeholder=\"请输入您的称呼\"\n                                        />\n                                        \n                                    </Form.Item>\n                                    <Form.Item \n                                    name=\"verifyCode\" \n                                    // label=\"验证码\" \n                                    rules={[{ \n                                        required: true ,\n                                        message:\"请输入验证码\",\n                                        }]}>\n                                        <Input \n                                        placeholder=\"请输入验证码\"\n                                        suffix={\n                                            <img style={{cursor:\"pointer\"}} src={this.state.veryfyCode}\n                                            onClick={()=>{\n                                                const _this=this;\n                                                FetchDoGet(\"/blog/v1/image/getKaptcha\",(response)=>{\n                                                    _this.setState({\n                                                        veryfyCode:response.verifyCode,\n                                                        veryfyCodeKey:response.verifyCodeKey\n                                                    })\n                                                })\n                                            }}\n                                            />\n                                        }\n                                        />\n                                    </Form.Item>\n                                    <Form.Item>\n                                        <Button type=\"primary\" htmlType=\"submit\">\n                                            发表\n                                        </Button>\n                                    </Form.Item>\n\n                                </Form>\n                            </div>\n\n                        </Card>\n                    </Col>\n                    <Col span={24}>\n                        <Card\n                        title={\"留言板\"}\n                        >\n                            <List\n                                className=\"comment-list\"\n                                // header={`${this.state.comments.length} replies`}\n                                itemLayout=\"horizontal\"\n                                dataSource={this.state.comments}\n                                pagination={false}\n                                footer={\n                                    <Pagination \n                                    showQuickJumper\n                                    showTotal={(total, range)=>{\n                                        return `当前显示：${range[0]}-${range[1]} 文章 总计 ${total} 篇文章`\n                                    }}\n                                    current={this.state.pageInfo.currentPage}\n                                    defaultPageSize={this.state.pageInfo.pageSize}\n                                    defaultCurrent={this.state.pageInfo.currentPage} \n                                    total={this.state.pageInfo.totalCount} \n                                    onChange={(page, pageSize)=>{\n                                        const _this=this;\n                                        FetchDoGet(this.state.requestUrl,function(response){\n                                            console.log(response)\n                                            _this.setState({\n                                                comments:response.data,\n                                                pageInfo:response\n                                            })\n                                        },{\n                                            currentPage:page,\n                                            pageSize:pageSize\n                                        });\n                                    }} />\n                                }\n                                renderItem={item => (\n                                <li>\n                                    <Comment\n                                    // actions={item.actions}\n                                    author={\n                                        <span style={{fontSize:\"14px\",fontWeight:\"bold\"}}>\n                                            {item.userName}\n                                        </span>\n                                    }\n                                    avatar={item.pitureUrl}\n                                    content={\n                                    <span style={{fontSize:\"14px\"}}>{item.message}</span>\n                                    }\n                                    datetime={\n                                        <span style={{fontSize:\"14px\",fontWeight:\"bold\"}}>\n                                            ({item.gmtUpdate})\n                                        </span>\n                                        \n                                    }\n                                    />\n                                </li>\n                                )}\n                            />\n                        </Card>\n                    </Col>\n                </Row>\n                \n            }\n            />\n        )\n    }\n\n}\n\nexport default withRouter(CommentSite)"]},"metadata":{},"sourceType":"module"}