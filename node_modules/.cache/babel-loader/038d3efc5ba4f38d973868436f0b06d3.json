{"ast":null,"code":"import _classCallCheck from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/breakpoint/npm_work/test-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{withRouter}from'react-router-dom';import{Select,Spin}from'antd';import debounce from'lodash/debounce';import{FetchDoGet}from'../commons/Utils';var Option=Select.Option;/**\n * 查询用户的搜索框\n */var SearchUserSelect=/*#__PURE__*/function(_React$Component){_inherits(SearchUserSelect,_React$Component);function SearchUserSelect(props){var _this2;_classCallCheck(this,SearchUserSelect);_this2=_possibleConstructorReturn(this,_getPrototypeOf(SearchUserSelect).call(this,props));_this2.fetchUser=function(value){console.log('fetching user',value);_this2.setState({data:[],fetching:true});var _this=_assertThisInitialized(_this2);FetchDoGet(\"/block/v1/sys_user/selectAllUsers\",function(response){_this.setState({data:response.data,fetching:false});},{userName:value});};_this2.handleChange=function(value){// this.setState({\n//   value,\n//   data: [],\n//   fetching: false,\n// });\n/**\n         * 回掉我们的请求\n         */_this2.props.onChange(value);};_this2.onFocus=function(){}// this.setState({\n//   data: [],\n//   fetching: false,\n// });\n/**\n     * 初始化我们的数据\n     */;_this2.state={data:[],fetching:false,requestUrl:\"/block/v1/sys_user/selectAllUsers\"};return _this2;}_createClass(SearchUserSelect,[{key:\"componentDidMount\",value:function componentDidMount(){this.setState({data:[],fetching:true});var _this=this;FetchDoGet(\"/block/v1/sys_user/selectAllUsers\",function(response){_this.setState({data:response.data,fetching:false});});}},{key:\"render\",value:function render(){var _this$state=this.state,fetching=_this$state.fetching,data=_this$state.data,value=_this$state.value;var placeHolder=this.props.placeholder;if(null==placeHolder||undefined==placeHolder){placeHolder=\"选择人员\";}return React.createElement(Select// mode=\"multiple\"\n,{labelInValue:true,showSearch:true,value:value,placeholder:placeHolder,onFocus:this.onFocus,notFoundContent:fetching?React.createElement(Spin,{size:\"small\"}):null,filterOption:false,onSearch:this.fetchUser,onChange:this.handleChange,style:{width:200,marginRight:\"8px\"}},React.createElement(Option,{value:\"\"},React.createElement(\"font\",{color:\"red\"},\"*\\u6CA1\\u6709,\\u8BF7\\u641C\\u7D22*\")),data.map(function(item){return React.createElement(Option,{key:item.uId},item.userName);}));}//end render\n}]);return SearchUserSelect;}(React.Component);//end class\nexport default withRouter(SearchUserSelect);","map":{"version":3,"sources":["/Users/breakpoint/npm_work/test-app/src/components/SearchUserSelect.js"],"names":["React","withRouter","Select","Spin","debounce","FetchDoGet","Option","SearchUserSelect","props","fetchUser","value","console","log","setState","data","fetching","_this","response","userName","handleChange","onChange","onFocus","state","requestUrl","placeHolder","placeholder","undefined","width","marginRight","map","item","uId","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { Select, Spin } from 'antd';\nimport debounce from 'lodash/debounce';\nimport { FetchDoGet } from '../commons/Utils';\n\n\nconst { Option } = Select;\n\n/**\n * 查询用户的搜索框\n */\nclass SearchUserSelect extends React.Component{\n\n    constructor(props){\n        super(props)\n        this.state={\n            data: [],\n            fetching: false,\n            requestUrl:\"/block/v1/sys_user/selectAllUsers\",\n        }\n    }\n\n    fetchUser = value => {\n        console.log('fetching user', value);\n        this.setState({ data: [], fetching: true });\n        const _this=this;\n        FetchDoGet(\"/block/v1/sys_user/selectAllUsers\",function(response){\n          _this.setState({ \n            data:response.data,\n            fetching: false \n        });\n        },{userName:value});\n      };\n\n    handleChange = value => {\n        // this.setState({\n        //   value,\n        //   data: [],\n        //   fetching: false,\n        // });\n        /**\n         * 回掉我们的请求\n         */\n        this.props.onChange(value)\n    };\n\n    onFocus=() =>{\n      // this.setState({\n      //   data: [],\n      //   fetching: false,\n      // });\n    }\n\n    /**\n     * 初始化我们的数据\n     */\n    componentDidMount(){\n      this.setState({ data: [], fetching: true });\n      const _this=this;\n      FetchDoGet(\"/block/v1/sys_user/selectAllUsers\",function(response){\n            _this.setState({ \n                data:response.data,\n                fetching: false \n            });\n        });\n    }\n\n    render(){\n        const { fetching, data, value } = this.state;\n\n        let placeHolder=this.props.placeholder;\n        if(null==placeHolder||undefined==placeHolder){\n          placeHolder=\"选择人员\"\n        }\n        return(\n            <Select\n            // mode=\"multiple\"\n            labelInValue\n            showSearch\n            value={value}\n            placeholder={placeHolder}\n            onFocus={this.onFocus}\n            notFoundContent={fetching ? <Spin size=\"small\" /> : null}\n            filterOption={false}\n            onSearch={this.fetchUser}\n            onChange={this.handleChange}\n            style={{ width: 200,marginRight:\"8px\" }}\n            >\n              <Option value=\"\"><font color=\"red\">*没有,请搜索*</font></Option>\n              {data.map(item => (\n                <Option key={item.uId}>{item.userName}</Option>\n              ))}\n            </Select>\n        )\n\n    }//end render\n\n}//end class\n\nexport default withRouter(SearchUserSelect)"]},"metadata":{},"sourceType":"module"}