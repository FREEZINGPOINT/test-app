{"ast":null,"code":"var _jsxFileName = \"/Users/breakpoint/npm_work/test-app/src/router/back/ImageMagage.js\";\nimport React from 'react';\nimport './ImageMagage.css';\nimport { withRouter } from 'react-router-dom';\nimport { Card, Row, Col, Tag, Avatar, Button, Upload } from 'antd';\nimport BackBlogGround from './BackBlogGround';\nimport LocalIconFont from '../../components/LocalIconFont';\nimport { AjaxDoPost, FetchDoUploadFile } from '../../commons/Utils';\nimport TabbleUtils from '../../components/TabbleUtils';\nimport Zmage from 'react-zmage';\nconst columns = [{\n  title: 'ID',\n  width: 30,\n  dataIndex: 'id',\n  key: 'id',\n  fixed: 'left',\n  // ellipsis:true,\n  align: \"tenter\"\n}, {\n  title: '图片',\n  width: 80,\n  dataIndex: 'type',\n  align: \"tenter\",\n  render: (text, record, index) => {\n    return (// <Avatar src={record.aPhoto}/>\n      React.createElement(Zmage, {\n        style: {\n          width: \"50px\"\n        },\n        src: record.aPhoto,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      })\n    );\n  }\n}, {\n  title: '描述',\n  width: 80,\n  dataIndex: 'aMsg',\n  align: \"tenter\"\n}, {\n  title: '位置',\n  width: 80,\n  dataIndex: 'aLocaltion',\n  // ellipsis:true,\n  align: \"tenter\"\n}, // {\n//     title: '是否展示',\n//     width: 80,\n//     dataIndex: 'type',\n//     align:\"tenter\",\n//     render:(text, record, index) => {\n//         return(\n//             (record.type==0)?(\n//                 <Tag color=\"green\">已发布</Tag>\n//             ):(\n//                 <Tag color=\"red\">未发布</Tag>\n//             )\n//         )\n//     }\n// },\n{\n  title: '发布时间',\n  width: 120,\n  dataIndex: 'gmtCreate',\n  align: \"tenter\"\n}, {\n  title: '操作',\n  key: 'operation',\n  fixed: 'right',\n  align: \"tenter\",\n  width: 120,\n  render: (text, record, index) => {\n    //console.log(\"row\",record);\n    //const _this=this;\n    return React.createElement(\"div\", {\n      style: {\n        height: \"40px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        float: \"left\",\n        width: \"45%\",\n        marginLeft: \"3px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"primary\",\n      ghost: false,\n      style: {\n        backgroundColor: \"#389e0d\",\n        border: \"none\",\n        float: \"left\"\n      },\n      icon: React.createElement(LocalIconFont, {\n        type: \"icon-edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }) // onClick={()=>{\n      //     //const _this=this;\n      //     AjaxDoPost(\"/v1/liuyan/publicComments\",(response)=>{\n      //         window.location.href='/comments-site-manage'\n      //     },\n      //     {\n      //         commentId:record.id\n      //     })\n      // }}\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"\\u64CD\\u4F5C\")));\n  }\n}];\n/**\n * 我们照片的基本管理\n */\n\nclass ImageMagage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      requestUrl: \"/blog/v1/album/selectPhotos\"\n    };\n  }\n\n  render() {\n    return React.createElement(BackBlogGround, {\n      leftSpan: 0,\n      rightSpan: 24,\n      extra: React.createElement(Row, {\n        gutter: [16, 16],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(Card, {\n        className: \"image-manage-upload-image\",\n        title: \"上传图片\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(Zmage, {\n        alt: \"\\u5F85\\u4E0A\\u4F20\\u7167\\u7247\",\n        src: this.state.pictrueUrl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), React.createElement(Upload, {\n        showUploadList: false,\n        customRequest: option => {\n          const formData = new FormData();\n          formData.append('file', option.file); //上传文件\n\n          FetchDoUploadFile(null, formData, function (response) {\n            console.log(response);\n\n            _this.setState({\n              avater: response.fileName,\n              oriFileName: response.oriFileName\n            });\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"\\u9009\\u62E9\\u7167\\u7247\"))), React.createElement(Col, {\n        span: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Card, {\n        title: \"照片的管理\",\n        extra: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }, \"\\u60A8\\u7684\\u4F4D\\u7F6E\\uFF1A\\u7F51\\u7AD9\\u76F8\\u518C\\u7684\\u7EF4\\u62A4\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(TabbleUtils, {\n        key: this.state.tableKey,\n        columns: columns // searchParams={}\n        ,\n        requestUrl: this.state.requestUrl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      })))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default withRouter(ImageMagage);","map":{"version":3,"sources":["/Users/breakpoint/npm_work/test-app/src/router/back/ImageMagage.js"],"names":["React","withRouter","Card","Row","Col","Tag","Avatar","Button","Upload","BackBlogGround","LocalIconFont","AjaxDoPost","FetchDoUploadFile","TabbleUtils","Zmage","columns","title","width","dataIndex","key","fixed","align","render","text","record","index","aPhoto","height","float","marginLeft","backgroundColor","border","ImageMagage","Component","constructor","props","state","requestUrl","pictrueUrl","option","formData","FormData","append","file","response","console","log","_this","setState","avater","fileName","oriFileName","tableKey"],"mappings":"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","sourcesContent":["import React from 'react'\nimport './ImageMagage.css'\nimport { withRouter } from 'react-router-dom'\nimport {Card,Row,Col,Tag,Avatar,Button,Upload} from 'antd'\nimport BackBlogGround from './BackBlogGround'\nimport LocalIconFont from '../../components/LocalIconFont'\nimport { AjaxDoPost,FetchDoUploadFile } from '../../commons/Utils'\nimport TabbleUtils from '../../components/TabbleUtils'\nimport Zmage from 'react-zmage'\n\nconst columns = [\n    {\n        title: 'ID',\n        width: 30,\n        dataIndex: 'id',\n        key: 'id',\n        fixed: 'left',\n        // ellipsis:true,\n        align:\"tenter\"\n    },\n    {\n        title: '图片',\n        width: 80,\n        dataIndex: 'type',\n        align:\"tenter\",\n        render:(text, record, index) => {\n            \n            return(\n                // <Avatar src={record.aPhoto}/>\n                <Zmage\n                style={{width:\"50px\"}}\n                 src={record.aPhoto}/>\n            )\n        }\n    },\n    {\n        title: '描述',\n        width: 80,\n        dataIndex: 'aMsg',\n        align:\"tenter\"\n    },\n    {\n        title: '位置',\n        width: 80,\n        dataIndex: 'aLocaltion',\n        // ellipsis:true,\n        align:\"tenter\"\n    },\n    // {\n    //     title: '是否展示',\n    //     width: 80,\n    //     dataIndex: 'type',\n    //     align:\"tenter\",\n    //     render:(text, record, index) => {\n            \n    //         return(\n    //             (record.type==0)?(\n    //                 <Tag color=\"green\">已发布</Tag>\n    //             ):(\n    //                 <Tag color=\"red\">未发布</Tag>\n    //             )\n    //         )\n    //     }\n    // },\n    {\n        title: '发布时间',\n        width: 120,\n        dataIndex: 'gmtCreate',\n        align:\"tenter\"\n    },\n    {\n        title: '操作',\n        key: 'operation',\n        fixed: 'right',\n        align:\"tenter\",\n        width: 120,\n        render: (text, record, index) => {\n            //console.log(\"row\",record);\n            //const _this=this;\n            return (\n                <div style={{height:\"40px\"}}>\n                    <span style={{float:\"left\",width:\"45%\",marginLeft:\"3px\"}}>\n                        <Button type=\"primary\"\n                        ghost={false} \n                        style={{backgroundColor:\"#389e0d\",border:\"none\",float:\"left\"}}\n                        icon={<LocalIconFont type=\"icon-edit\" />}\n                        // onClick={()=>{\n                        //     //const _this=this;\n                        //     AjaxDoPost(\"/v1/liuyan/publicComments\",(response)=>{\n                        //         window.location.href='/comments-site-manage'\n                        //     },\n                        //     {\n                        //         commentId:record.id\n                        //     })\n                        // }}\n                        >\n                            操作\n                        </Button>  \n                    </span>\n                    {/* <span style={{float:\"left\",width:\"45%\",marginLeft:\"4px\"}}>\n                    <Button type=\"danger\"\n                        ghost={false} \n                        style={{backgroundColor:\"#f44336\",border:\"none\",float:\"left\"}}\n                        icon={<LocalIconFont type=\"icon-edit\" />}\n                        >\n                        冻结</Button>\n                    </span> */}\n                </div>\n            )\n        },\n    },\n];\n/**\n * 我们照片的基本管理\n */\nclass ImageMagage extends React.Component{\n\n    constructor(props){\n        super(props)\n        this.state={\n            requestUrl:\"/blog/v1/album/selectPhotos\"\n        }\n\n    }\n\n    render(){\n\n        return(\n            <BackBlogGround\n            leftSpan={0}\n            rightSpan={24}\n            extra={\n                <Row gutter={[16,16]}>\n                    <Col span={24}>\n                        <Card\n                        className=\"image-manage-upload-image\"\n                        title={\"上传图片\"}\n                        >\n                            <Zmage alt=\"待上传照片\" src={this.state.pictrueUrl}/>\n                            <Upload showUploadList={false} customRequest={(option)=>{\n                                const formData = new FormData(); formData.append('file',option.file);\n                                //上传文件\n                                FetchDoUploadFile(null,formData,function(response){ console.log(response)\n                                _this.setState({ avater:response.fileName, oriFileName:response.oriFileName\n                                }) })\n                                }} >\n                                    选择照片\n                                </Upload>\n                        </Card>\n                    </Col>\n                    <Col span={24}>\n                        <Card \n                        title={\"照片的管理\"}\n                        extra={\n                            <div>您的位置：网站相册的维护</div>\n                        }\n                        >\n\n                    <TabbleUtils\n                    key={this.state.tableKey}\n                    columns={columns}\n                    // searchParams={}\n                    requestUrl={this.state.requestUrl}\n                    />\n                            \n                        </Card>\n                    </Col>\n                </Row>\n            }\n            />\n        )\n    }\n\n}\n\nexport default withRouter(ImageMagage)"]},"metadata":{},"sourceType":"module"}